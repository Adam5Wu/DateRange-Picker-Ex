/**
 * daterange-picker-ex
 * @version v1.0.0
 * @link https://adam5wu.github.io/DateRange-Picker-Ex/
 * @license MIT
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(e,t){"use strict";e.DRPExLang=e.extend({default:"en",en:{selected:"Selected:",day:"Day",days:"Days","apply-disabled":"Close","apply-enabled":"Apply","week-1":"mo","week-2":"tu","week-3":"we","week-4":"th","week-5":"fr","week-6":"sa","week-7":"su","week-number":"W",shortcuts:"Shortcuts",past:"Past",following:"Following",previous:"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year",next:"Next","next-week":"Week","next-month":"Month","next-year":"Year","less-than":"Date range should not be more than %d days","more-than":"Date range should not be less than %d days","range-start-bound":"Start date range out-of-bound","range-end-bound":"End date range out-of-bound","batch-invalid":'Date range does not satisfy batch constraint "%s"',"default-more":"Please select a date range longer than %d days","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between %d and %d days","default-default":"Please select a date range"}},e.DRPExLang),e.fn.dateRangePicker=function(a){function n(){function n(e){var t=e.parents("table").hasClass("month2"),n=j(t?G.month2:G.month1);!a.singleMonth&&!t&&z(n,G.month2)>=0||$(n)||(_(n,t?"month2":"month1"),N())}function o(){var e=j(G.month1),t=j(G.month2);$(t)||(_(e,"month1"),_(t,"month2"),B())}function i(e){var a=e.parents("table").hasClass("month2"),n=q(a?G.month2:G.month1);a&&z(n,G.month1)<=0||$(t(n).endOf("month").startOf("day").toDate())||(_(n,a?"month2":"month1"),N())}function d(){var e=q(G.month1),a=q(G.month2);$(t(e).endOf("month").startOf("day").toDate())||(_(a,"month2"),_(e,"month1"),B())}G.fblocalizer=r(G.locale);var c=G.locale;if("auto"==a.language){var p=navigator.languages||navigator.userLanguage||(navigator.language?[navigator.language]:[navigator.browserLanguage]);for(var f in p)if(f=f.toLowerCase(),f in e.DRPExLang){c=f;break}}else a.language in e.DRPExLang&&(c=a.language);var h=r(c);G.locale=h[0],G.localizer=h[1];var u=G.formatter.locale();G.formatter.locale(a.language)._locale||G.formatter.locale(G.locale)._locale||G.formatter.locale(c)._locale||G.formatter.locale(u),G.monthFormat=G.formatter.localeData().longDateFormat("LL").replace(/Y(\s*)[^YMD]*D[^M]*/,"Y$1").replace(/M(\s*)[^YMD]*D[^Y]*/,"M$1").replace(/[^YM]*D[^YM]*/,""),G.wrapper=U(),(a.container||e("body")).append(G.wrapper),G.wrapper.delegate(".day","mouseleave",function(){G.wrapper.find(".date-range-length-tip").hide(),x()});var g="";g=s(a.singleDate?"default-single":a.minDays&&a.maxDays?"default-range":a.minDays?"default-more":a.maxDays?"default-less":"default-default");var v=g.replace(/\%d/,a.minDays).replace(/\%d/,a.maxDays);G.wrapper.find(".default-top").html(v).attr("title",v),a.singleMonth?G.wrapper.addClass("single-month"):G.wrapper.addClass("two-months"),G.wrapper.find(".next").click(function(){a.stickyMonths?o(e(this)):n(e(this))}),G.wrapper.find(".prev").click(function(){a.stickyMonths?d(e(this)):i(e(this))}),G.wrapper.delegate(".day","click",function(t){y(e(this))}),G.wrapper.delegate(".day","mouseenter",function(t){C(e(this))}),G.wrapper.delegate(".week-number","click",function(t){b(e(this))}),G.wrapper.delegate(".week-number","mouseenter",function(t){R(e(this))}),G.wrapper.attr("unselectable","on").css("user-select","none").bind("selectstart",function(e){return e.preventDefault(),!1}),G.wrapper.find(".apply-btn").click(function(){W()}),G.wrapper.find("[shortcut]").click(function(){var n,r,s,o=e(this).attr("shortcut"),i=t().startOf("day");if(o.indexOf("day")!=-1){var l=parseInt(o.split(",",2)[1]);0==l?(m(),L(i)):(n=i.clone().add(l>0?1:-1,"day").toDate(),r=i.add(l,"day").toDate())}else if(o.indexOf("week")!=-1){var s=o.indexOf("prev,")==-1;n=s?i.day("monday"==a.startOfWeek?8:7).toDate():i.day("monday"==a.startOfWeek?-6:-7).toDate(),r=i.clone().day("monday"==a.startOfWeek?7:6).toDate()}else if(o.indexOf("month")!=-1){var s=o.indexOf("prev,")==-1;n=s?i.add(1,"month").date(1).toDate():i.subtract(1,"month").date(1).toDate(),r=i.clone().endOf("month").startOf("day").toDate()}else if(o.indexOf("year")!=-1){var s=o.indexOf("prev,")==-1;n=s?i.add(1,"year").month(0).date(1).toDate():i.subtract(1,"year").month(0).date(1).toDate(),r=i.clone().endOf("year").startOf("day").toDate()}else if("custom"==o){var d=e(this).text(),c=a.shortcuts.custom[d],p="function"==typeof c?c(i):c;if(p&&2==p.length&&(n=p[0],r=p[1]),p&&1==p.length){var f=p[0];L(f)}}n&&r&&T(n,r)}),a.alwaysOpen||e(document).bind("click.DRPick",l)}function r(t){for(var a=e.DRPExLang[t];a.constructor===String;)t=a,a=e.DRPExLang[a];return[t,a]}function s(e){return G.localizer[e]||G.fblocalizer[e]||"??"}function o(e){if(e.start&&e.end&&t(e.start).isAfter(t(e.end))){var a=e.end;e.end=e.start,e.start=a}}function i(e,t){return t.contains(e.target)||e.target==t}function l(e){i(e,G.anchor[0])||i(e,G.wrapper[0])||G.active&&p(a.duration)}function d(){if(G.active){var t=G.anchor.offset(),a=G.anchor.outerWidth(),n=G.anchor.outerHeight();t.right=t.left+a,t.bottom=t.top+n;var r=G.wrapper.offset(),s=G.wrapper.outerWidth(),o=G.wrapper.outerHeight();r.right=r.left+s,r.bottom=r.top+o;var i={top:e(window).scrollTop(),left:e(window).scrollLeft()},l=e(window).width(),d=e(window).height();if(i.right=i.left+l,i.bottom=i.top+d,r.left>=i.left&&r.right<=i.right&&r.top>=i.top&&r.bottom<=i.bottom&&r.left==t.left&&(r.top==t.bottom||G.wrapper.bottom==t.top))return!1;var c,p=t.left+s<=i.right?Math.max(t.left,i.left):Math.max(i.left,i.right-s),f=t.bottom+o<=i.bottom||t.top-o<i.top;if(f){var h=Math.max(t.bottom,i.top);G.wrapper.css({top:h,bottom:"auto",left:p}),c=h-t.bottom}else{var u=e("body").outerHeight(),g=Math.min(t.top,i.bottom);G.wrapper.css({top:"auto",bottom:u-g,left:p}),c=t.top-g}return G.wrapper.css({opacity:.3+.7/Math.log2(2+(c>>7))}),!0}}function c(t){if(!G.active){G.wrapper||n(),G.active=!0,G.wrapper.css({display:"block",visibility:0}),u(),g(),a.container||d(),G.wrapper.css({display:"none",visibility:"initial"});var r=function(){G.anchor.trigger("DRPick-opened",{relatedTarget:G.wrapper})};if(a.customOpenAnimation?a.customOpenAnimation.call(G.wrapper[0],r):G.wrapper.slideDown(t,r),G.anchor.trigger("DRPick-open",{relatedTarget:G.wrapper}),a.container||e(window).bind("resize.DRPick scroll.DRPick",d),a.watchValueChange){var s=null;G.anchor.bind("input.DRPick",function(){clearTimeout(s),s=setTimeout(function(){s=null;var e=f(a.getValue.call(G.anchor[0]));e&&h(e,!0)},200)})}}}function p(t){if(!a.alwaysOpen&&G.active){G.active=!1;var n=function(){G.anchor.trigger("DRPick-closed",{relatedTarget:G.wrapper})};a.customCloseAnimation?a.customCloseAnimation.call(G.wrapper[0],n):G.wrapper.slideUp(t,n),G.anchor.trigger("DRPick-close",{relatedTarget:G.wrapper}),a.container||e(window).unbind("resize.DRPick scroll.DRPick",d),a.watchValueChange&&G.anchor.unbind("input.DRPick")}}function f(e){var n=e&&e.constructor==String?e.trim():void 0;if(n){n=e.split(a.separator);for(var r=0;r<n.length;){var s=t(n[r],a.format,t.locale(a.language));if(!s.isValid())break;if(n[r]=s.toDate(),++r>=2)break;if(a.singleDate)break}r!=n.length&&(r>0?n.splice(r):n=void 0)}return n}function h(e,t){e.length>1?T(e[0],e[1],t):T(e[0],e[0],t)}function u(){var e=f(a.getValue.call(G.anchor[0]));e&&h(e,!0),L()}function g(){var e=G.wrapper.find(".gap").css("margin-left"),t=G.wrapper.find(".month1").width(),a=G.wrapper.find(".gap").width()+(e?2*parseInt(e):0),n=G.wrapper.find(".month2").width(),r=t+a+n+2;G.wrapper.find(".month-wrapper").width(r);var s=G.wrapper.find(".drp_top-bar input").outerWidth();G.wrapper.find(".drp_top-bar div").width(r-s-2)}function m(){G.selRange.start=!1,G.selRange.end=!1,G.wrapper.find(".day.checked").removeClass("checked"),G.wrapper.find(".day.last-date-selected").removeClass("last-date-selected"),G.wrapper.find(".day.first-date-selected").removeClass("first-date-selected"),S(),P(),B(),G.anchor.trigger("DRPick-change",{value:""})}function v(e){var n=e;return"week-range"===a.batchMode?n=t(e).day("monday"===a.startOfWeek?1:0).valueOf():"month-range"===a.batchMode&&(n=t(e).startOf("month").valueOf()),n}function w(e){var n=e;return"week-range"===a.batchMode?n=t(e).day("monday"===a.startOfWeek?7:6).valueOf():"month-range"===a.batchMode&&(n=t(e).endOf("month").startOf("day").valueOf()),n}function y(e){if(!e.hasClass("invalid")&&!G.selWeek){var n=parseInt(e.attr("SOD-time"));if(e.addClass("checked"),a.singleDate?(G.selRange.start=n,G.selRange.end=n):"week"===a.batchMode?(G.selRange.start=t(n).day("monday"===a.startOfWeek?1:0).valueOf(),G.selRange.end=t(n).day("monday"===a.startOfWeek?7:6).valueOf()):"weekdays"===a.batchMode?(G.selRange.start=t(n).day(1).valueOf(),G.selRange.end=t(n).day(5).valueOf()):"weekends"===a.batchMode?(G.selRange.start=t(n).day(6).valueOf(),G.selRange.end=t(n).day(7).valueOf()):"month"===a.batchMode?(G.selRange.start=t(n).startOf("month").valueOf(),G.selRange.end=t(n).endOf("month").startOf("day").valueOf()):G.selRange.start&&G.selRange.end||!G.selRange.start&&!G.selRange.end?(G.selRange.start=v(n),G.selRange.end=!1):G.selRange.start&&(G.selRange.end=w(n)),o(G.selRange),x(),G.selRange.start&&!G.selRange.end){var r=I(G.selRange.start);G.anchor.trigger("DRPick-first-date",{value:r,date1:new Date(G.selRange.start)}),C(e),G.wrapper.find(".week-number").removeClass("week-number-selected")}O(n),G.selWeek&&(G.selWeek=!1),S(),P(),B(),M()}}function k(t,a){G.wrapper.find(".day").each(function(){var n=parseInt(e(this).attr("SOD-time"));t==n?(e(this).addClass("first-date-selected"),e(this).removeClass("last-date-selected")):a==n?(e(this).removeClass("first-date-selected"),e(this).addClass("last-date-selected")):(e(this).removeClass("first-date-selected"),e(this).removeClass("last-date-selected")),t<=n&&a>=n?e(this).addClass("hovering"):e(this).removeClass("hovering")})}function b(e){if((!G.selRange.start||G.selRange.end||G.selWeek)&&!a.singleDate){var n=parseInt(e.attr("SOW-time"));if(G.selWeek){x();var r=new Date(n<G.selWeek?n:G.selWeek),s=new Date(n<G.selWeek?G.selWeek:n);G.selWeek=!1,G.selRange.start=t(r).day("monday"==a.startOfWeek?1:0).valueOf(),G.selRange.end=t(s).day("monday"==a.startOfWeek?7:6).valueOf(),S(),P(),B(),M()}else{G.selWeek=n;var o=new Date(n);G.selRange.start=t(o).day("monday"==a.startOfWeek?1:0).valueOf(),G.selRange.end=!1;var i=t(o).day("monday"==a.startOfWeek?7:6).valueOf();G.wrapper.find(".day.checked").removeClass("checked"),k(G.selRange.start,i),G.wrapper.find(".week-number-selected").removeClass("week-number-selected"),e.addClass("week-number-selected"),O(),S(),P()}}}function R(e){if(G.selWeek&&!a.singleDate){var n=parseInt(e.attr("SOW-time"));if(n>=G.selWeek){var r=new Date(n),s=t(r).day("monday"==a.startOfWeek?7:6).valueOf();k(G.selRange.start,s)}else{var o=new Date(n),i=new Date(G.selWeek),l=t(o).day("monday"==a.startOfWeek?1:0).valueOf(),s=t(i).day("monday"==a.startOfWeek?7:6).valueOf();k(l,s)}}}function D(e){if($(e))return!1;if(G.selRange.start&&!G.selRange.end&&!a.singleDate){if(a.maxDays>0&&V(e,G.selRange.start)>a.maxDays||a.minDays>0&&V(e,G.selRange.start)<a.minDays)return!1;if(a.selectForward&&e<G.selRange.start||a.selectBackward&&e>G.selRange.start)return!1;if(a.beforeShowDay&&"function"==typeof a.beforeShowDay)for(var n=t(e);V(n,G.selRange.start)>1;){var r=a.beforeShowDay(n.toDate());if(r[0]===!1)return!1;n.add(e<G.selRange.start?1:-1,"day")}}return!0}function O(){return G.wrapper.find(".day.invalid.tmp").removeClass("tmp invalid").addClass("valid"),G.wrapper.find(".week-number.invalid.tmp").removeClass("tmp invalid").addClass("valid"),G.selRange.start&&!G.selRange.end&&(G.wrapper.find(".day.toMonth.valid").each(function(){var t=parseInt(e(this).attr("SOD-time"));D(t)?e(this).addClass("valid tmp").removeClass("invalid"):e(this).addClass("invalid tmp").removeClass("valid")}),G.wrapper.find(".week-number").each(function(){var t=parseInt(e(this).attr("SOW-time"));D(t)?e(this).addClass("valid tmp").removeClass("invalid"):e(this).addClass("invalid tmp").removeClass("valid")})),!0}function C(t){if(!G.selWeek){var n=parseInt(t.attr("SOD-time")),r="";if(t.hasClass("has-tooltip")&&t.attr("data-tooltip"))r='<span style="white-space:nowrap">'+t.attr("data-tooltip")+"</span>";else if(!t.hasClass("invalid"))if(a.singleDate)G.wrapper.find(".day.hovering").removeClass("hovering"),t.addClass("hovering");else if(G.wrapper.find(".day").each(function(){var t=parseInt(e(this).attr("SOD-time"));t==n?e(this).addClass("hovering"):e(this).removeClass("hovering"),G.selRange.start&&!G.selRange.end&&(G.selRange.start<t&&n>=t||G.selRange.start>t&&n<=t)?e(this).addClass("hovering"):e(this).removeClass("hovering")}),G.selRange.start&&!G.selRange.end){var o=V(n,G.selRange.start);a.hoveringTooltip&&("function"==typeof a.hoveringTooltip?r=a.hoveringTooltip(o,G.selRange.start,n):a.hoveringTooltip===!0&&o>1&&(r=o+" "+s("days")))}if(r){var i=t.offset(),l=G.wrapper.offset(),d=i.left-l.left,c=i.top-l.top;d+=t.width()/2;var p=G.wrapper.find(".date-range-length-tip"),f=p.css({visibility:"hidden",display:"none"}).html(r).width(),h=p.height();d-=f/2,c-=h,p.css({left:d,top:c,display:"block",visibility:"visible"})}else G.wrapper.find(".date-range-length-tip").hide()}}function x(){G.wrapper.find(".day.hovering").removeClass("hovering"),G.wrapper.find(".date-range-length-tip").hide()}function W(){if(G.selRange.start&&G.selRange.end){var e,t,n;a.singleDate?(e=I(G.selRange.start),G.anchor.trigger("DRPick-apply",{value:e,date1:new Date(G.selRange.start)})):(t=I(G.selRange.start),n=I(G.selRange.end),e=t+a.separator+n,G.anchor.trigger("DRPick-apply",{value:e,date1:[new Date(G.selRange.start),t],date2:[new Date(G.selRange.end),n]})),a.setValue.call(G.anchor[0],e,t,n)}p(a.duration)}function M(){a.autoClose&&G.selRange.start&&(a.singleDate||G.selRange.end)&&W()}function S(){var e=!0,n=G.selRange.start&&G.selRange.end?V(G.selRange.start,G.selRange.end):NaN;if(a.singleDate)G.selRange.start||(e=void 0);else if(a.maxDays&&n>a.maxDays){var r=s("less-than").replace("%d",a.maxDays);G.wrapper.find(".drp_top-bar .error-top").html(r).attr("title",r),e=!1}else if(a.minDays&&n<a.minDays){var r=s("more-than").replace("%d",a.minDays);G.wrapper.find(".drp_top-bar .error-top").html(r).attr("title",r),e=!1}else isNaN(n)&&(e=void 0);if(e)if($(G.selRange.start)){var r=s("range-start-bound");G.wrapper.find(".drp_top-bar .error-top").html(r).attr("title",r),e=!1}else if($(G.selRange.end)){var r=s("range-end-bound");G.wrapper.find(".drp_top-bar .error-top").html(r).attr("title",r),e=!1}if(e&&a.batchMode){var o=t(G.selRange.start),i=t(G.selRange.end);switch(a.batchMode){case"week":o.isSame(o.clone().day("monday"==a.startOfWeek?1:0))&&i.isSame(o.clone().day("monday"==a.startOfWeek?7:6))||(e=!1);break;case"weekdays":o.isSame(o.clone().day(1))&&i.isSame(o.clone().day(5))||(e=!1);break;case"weekends":o.isSame(o.clone().day(6))&&i.isSame(o.clone().day(0))||(e=!1);break;case"month":o.isSame(o.clone().startOf("month"))&&i.isSame(o.clone().endOf("month").startOf("day"))||(e=!1);break;case"week-range":o.isSame(o.clone().day("monday"==a.startOfWeek?1:0))&&i.isSame(i.clone().day("monday"==a.startOfWeek?7:6))||(e=!1);break;case"month-range":o.isSame(o.clone().startOf("month"))&&i.isSame(i.clone().endOf("month").startOf("day"))||(e=!1);break;default:throw new Error("Unrecognized batch mode - "+a.batchMode)}if(!e){var r=s("batch-invalid").replace("%s",a.batchMode);G.wrapper.find(".drp_top-bar .error-top").html(r).attr("title",r)}}return e?(G.wrapper.find(".drp_top-bar").removeClass("error").addClass("normal"),G.wrapper.find(".apply-btn").removeClass("disabled").val(s("apply-enabled"))):(void 0==e?G.wrapper.find(".drp_top-bar").removeClass("error").addClass("normal"):G.wrapper.find(".drp_top-bar").addClass("error").removeClass("normal"),G.wrapper.find(".apply-btn").addClass("disabled").val(s("apply-disabled"))),e}function P(e){G.wrapper.find(".start-day").html("..."),G.wrapper.find(".end-day").html("..."),G.wrapper.find(".selected-days").hide(),G.selRange.start&&G.wrapper.find(".start-day").html(I(G.selRange.start)),G.selRange.end&&G.wrapper.find(".end-day").html(I(G.selRange.end)),G.selRange.start&&a.singleDate?e||G.anchor.trigger("DRPick-change",{date1:new Date(G.selRange.start)}):G.selRange.start&&G.selRange.end&&(G.wrapper.find(".selected-days").show().find(".selected-days-num").html(V(G.selRange.end,G.selRange.start)),e||G.anchor.trigger("DRPick-change",{date1:new Date(G.selRange.start),date2:new Date(G.selRange.end)}));var t=G.wrapper.find(".drp_top-bar .normal-top");t.attr("title",t.text())}function T(e,t,n){var r={start:e,end:t};o(r),G.selRange.start==r.start.getTime()&&G.selRange.end==r.end.getTime()||(G.selRange.start=r.start.getTime(),G.selRange.end=r.end.getTime(),(a.stickyMonths||F(r.start,r.end)>0&&0===z(r.start,r.end))&&(a.lookBehind?r.start=q(r.end):r.end=j(r.start)),a.stickyMonths?a.dateRange.end!==!1&&z(r.end,a.dateRange.end)>0&&(r.start=q(r.start),r.end=q(r.end)):0===z(r.start,r.end)&&(a.lookBehind?r.start=q(r.end):r.end=j(r.start)),_(r.start,"month1"),_(r.end,"month2"),N(),S(),P(n),B()),n||M()}function B(){(G.selRange.start||G.selRange.end)&&(G.wrapper.find(".day").each(function(){var t=parseInt(e(this).attr("SOD-time"));G.selRange.end&&G.selRange.end>=t&&G.selRange.start<=t||!G.selRange.end&&G.selRange.start==t?e(this).addClass("checked"):e(this).removeClass("checked"),G.selRange.start==t?e(this).addClass("first-date-selected"):e(this).removeClass("first-date-selected"),G.selRange.end==t?e(this).addClass("last-date-selected"):e(this).removeClass("last-date-selected")}),G.wrapper.find(".week-number").each(function(){parseInt(e(this).attr("SOW-time"))==G.selWeek&&e(this).addClass("week-number-selected")}),G.selRange.end&&G.wrapper.find(".week-number").each(function(){var n=new Date(parseInt(e(this).attr("SOW-time"))),r=t(n).day("monday"==a.startOfWeek?1:0).valueOf(),s=t(n).day("monday"==a.startOfWeek?7:6).valueOf();r>=G.selRange.start&&s<=G.selRange.end?e(this).addClass("week-number-selected"):e(this).removeClass("week-number-selected")}))}function _(e,a){e=t(e).startOf("month").toDate(),G.wrapper.find("."+a+" .month-name").html(A(e)),G.wrapper.find("."+a+" tbody").html(Q(e)),G[a]=e,O()}function A(e){return G.formatter.toDate().setTime(e),G.formatter.format(G.monthFormat)}function I(e){return G.formatter.toDate().setTime(e),G.formatter.format(a.format)}function N(){z(G.month2,G.month1)>1?G.wrapper.addClass("has-gap").removeClass("no-gap").find(".gap").css("visibility","visible"):G.wrapper.removeClass("has-gap").addClass("no-gap").find(".gap").css("visibility","hidden");var e=G.wrapper.find("table.month1").height(),t=G.wrapper.find("table.month2").height();G.wrapper.find(".gap").height(Math.max(e,t)+10)}function Y(){_(G.month1,"month1"),_(G.month2,"month2")}function E(){var e=a.defaultTime?a.defaultTime:new Date;return a.dateRange.start&&z(e,a.dateRange.start)<0?e=t(a.dateRange.start).toDate():a.dateRange.end&&z(e,a.dateRange.end)>0&&(e=q(t(a.dateRange.end).toDate())),e}function L(){var e=G.selRange.start,t=G.selRange.end;e?0==z(e,t)&&(a.lookBehind?a.dateRange.start&&z(e,a.dateRange.start)>0&&(e=q(e)):t=j(t)):(e=E(),t=j(e)),_(e,"month1"),_(t,"month2"),N(),B()}function z(e,a){return t(e).startOf("month").diff(t(a).startOf("month"),"month")}function F(e,a){return t(e).diff(t(a),"day")}function V(e,t){return Math.abs(F(e,t))+1}function j(e){return t(e).add(1,"month").toDate()}function q(e){return t(e).add(-1,"month").toDate()}function H(t,a,n){var r="<"+t;return a&&(e.each(a,function(e,t){r+=" "+e+'="'+t+'"'}),void 0!==n&&(r+=n?">"+n+"</"+t:"/")),r+">"}function U(){var t=H("div",{class:"date-picker-wrapper"+(a.haveTopbar?a.customTopBar?" custom-topbar":"":" no-topbar ")+(a.inline?" inline-wrapper":"")});a.haveTopbar&&(t+=H("div",{class:"drp_top-bar"}),a.customTopBar?t+=H("div",{class:"custom-top"},"function"==typeof a.customTopBar?a.customTopBar():a.customTopBar):(t+=H("div",{class:"normal-top"})+H("span",{},s("selected"))+" "+H("b",{class:"start-day"},"(Start day)"),a.singleDate||(t+=H("span",{class:"separator-day"},a.separator)+H("b",{class:"end-day"},"(End day)")+H("i",{class:"selected-days"})+" ("+H("span",{class:"selected-days-num"},"X")+" "+s("days")+")"+H("/i")),t+=H("/div"),t+=H("div",{class:"error-top"},"Error message")+H("div",{class:"default-top"},"Default message")),t+=H("input",{type:"button",value:s("apply-disabled"),class:"apply-btn disabled"+(a.autoClose?"hide":"")+(a.applyBtnClass?" "+a.applyBtnClass:"")},""),t+=H("/div")),t+=H("div",{class:"month-wrapper"});var n=function(){var e="";return a.showWeekNumbers&&(e+=H("th",{},s("week-number"))),e+="monday"==a.startOfWeek?H("th",{},s("week-1"))+H("th",{},s("week-2"))+H("th",{},s("week-3"))+H("th",{},s("week-4"))+H("th",{},s("week-5"))+H("th",{},s("week-6"))+H("th",{},s("week-7")):H("th",{},s("week-7"))+H("th",{},s("week-1"))+H("th",{},s("week-2"))+H("th",{},s("week-3"))+H("th",{},s("week-4"))+H("th",{},s("week-5"))+H("th",{},s("week-6"))},r=function(e){var t=H("table",{class:e,cellspacing:"0",border:"0",cellpadding:"0"});return t+=H("thead")+H("tr",{class:"caption"})+H("th",{class:"button"},H("span",{class:"prev"},a.customArrowPrevSymbol||"&lt;"))+H("th",{class:"month-name",colspan:a.showWeekNumbers?6:5},"(Month)")+H("th",{class:"button"},H("span",{class:"next"},a.customArrowNextSymbol||"&gt;"))+H("/tr")+H("tr",{class:"week-name"},n())+H("/thead"),t+H("tbody",{},"")+H("/table")};if(t+=r("month1"),!a.singleMonth){var o=function(){for(var e=H("div",{class:"gap"})+H("div",{class:"gap-top-mask"},"")+H("div",{class:"gap-bottom-mask"},"")+H("div",{class:"gap-lines"}),t=0;t<20;t++)e+=H("div",{class:"gap-line"},H("div",{class:"gap-1"},"")+H("div",{class:"gap-2"},"")+H("div",{class:"gap-3"},""));return e+H("/div")+H("/div")};t+=o()+r("month2")}t+=H("div",{class:"spacer"},"")+H("/div"),t+=H("div",{class:"footer"});var i=function(){var t="",n=a.shortcuts;if(n["prev-days"]&&n["prev-days"].length>0){t+=H("span",{class:"prev-days"})+s("past");for(var r=0;r<n["prev-days"].length;r++){var o=n["prev-days"][r];t+=H("span",{class:"shortcut",shortcut:"day,-"+o},o+" "+s(o>1?"days":"day"))}t+=H("/span")}if(n["next-days"]&&n["next-days"].length>0){t+=H("span",{class:"next-days"})+s("following");for(var r=0;r<n["next-days"].length;r++){var o=n["next-days"][r];t+=H("span",{class:"shortcut",shortcut:"day,+"+o},o+" "+s(o>1?"days":"day"))}t+=H("/span")}if(n.prev&&n.prev.length>0){t+=H("span",{class:"prev-buttons"})+s("previous");for(var r=0;r<n.prev.length;r++){var i=n.prev[r];t+=H("span",{class:"shortcut",shortcut:"prev,"+i},s("prev-"+i))}t+=H("/span")}if(n.next&&n.next.length>0){t+=H("span",{class:"next-buttons"})+s("next");for(var r=0;r<n.next.length;r++){var i=n.next[r];t+=H("span",{class:"shortcut",shortcut:"next,"+i},s("next-"+i))}t+=H("/span")}if(n.custom&&!e.isEmptyObject(n.custom)){t+=H("span",{class:"custom-buttons"});for(var l in n.custom)t+=H("span",{class:"shortcut",shortcut:"custom"},l);t+=H("/span")}return t},l=i();return t+=H("div",{class:"shortcuts"+(l?"":" none")},H("b",{},s("shortcuts"))+l),t+=H("/div"),t+=H("div",{class:"date-range-length-tip"},""),t+=H("/div"),e(t)}function $(e){return e=t(e),a.dateRange.start&&e.isBefore(a.dateRange.start)||a.dateRange.end&&e.isAfter(a.dateRange.end)}function Q(e){var n=[];e.setDate(1);var r=e.getDay();if(0===r&&"monday"===a.startOfWeek&&(r=7),r>0)for(var s=r;s>0;s--){var o=t(e).subtract(s,"day").toDate();n.push({date:o,type:"lastMonth",day:o.getDate(),time:o.getTime(),valid:D(o.getTime())})}for(var i=e.getMonth(),s=0;s<40;s++){var l=t(e).add(s,"day").toDate();n.push({date:l,type:l.getMonth()==i?"toMonth":"nextMonth",day:l.getDate(),time:l.getTime(),valid:D(l.getTime())})}var d="",c=t(),p=c.diff(e,"month",!0);(p<0||p>1)&&(c=!1);for(var f=0;f<6&&"nextMonth"!=n[7*f].type;f++){d+=H("tr");for(var o=0;o<7;o++){var h="monday"==a.startOfWeek?o+1:o,l=n[7*f+h];if(l.extraClass="",l.tooltip="",l.valid&&a.beforeShowDay&&"function"==typeof a.beforeShowDay){var u=a.beforeShowDay(l.date);l.valid=u[0],l.extraClass=u[1]||"",l.tooltip=u[2]||"",""!==l.tooltip&&(l.extraClass+=" has-tooltip ")}"monday"==a.startOfWeek?o>=5&&(l.extraClass+=" weekend "):0!=o&&6!=o||(l.extraClass+=" weekend "),0===o&&a.showWeekNumbers&&(d+=H("td",{},H("div",{class:"week-number","SOW-time":l.time},a.getWeekNumber(l.date)))),d+=H("td",{},H("div",{"SOD-time":l.time,"data-tooltip":l.tooltip,class:"day "+l.type+" "+l.extraClass+(l.valid?" valid":" invalid")+(c&&c.date()==l.day?" real-today":"")},X(l.time,l.day)))}d+=H("/tr")}return d}function X(e,t){return a.showDateFilter&&"function"==typeof a.showDateFilter?a.showDateFilter(e,t):t}a=e.extend({autoClose:!1,format:"YYYY-MM-DD",separator:" to ",language:"auto",startOfWeek:"sunday",getValue:function(){return e(this).val()},setValue:function(t){t!=e(this).val()&&e(this).val(t).change()},dateRange:{start:!1,end:!1},minDays:0,maxDays:0,shortcuts:{},watchValueChange:!0,container:void 0,alwaysOpen:!1,dropTrigger:!0,singleDate:!1,lookBehind:!1,batchMode:!1,duration:200,stickyMonths:!1,selectForward:!1,selectBackward:!1,applyBtnClass:"",singleMonth:!1,hoveringTooltip:function(e,t,a){return e>1?e+" "+s("days"):""},haveTopbar:!0,showWeekNumbers:!1,getWeekNumber:function(e){return t(e).format("w")},customOpenAnimation:null,customCloseAnimation:null,customArrowPrevSymbol:null,customArrowNextSymbol:null},a),a.singleMonth&&(a.stickyMonths=!1),a.haveTopbar||(a.autoClose=!0),a.singleDate&&(a.batchMode=!1),a.dateRange.start&&a.dateRange.start.constructor==String&&(a.dateRange.start=t(a.dateRange.start,a.format).toDate()),a.dateRange.end&&a.dateRange.end.constructor==String&&(a.dateRange.end=t(a.dateRange.end,a.format).toDate()),o(a.dateRange);var G={selRange:{start:!1,end:!1},selWeek:!1,active:!1,locale:"default",localizer:{},fblocalizer:{},formatter:t(),monthFormat:"??",anchor:e(this),wrapper:void 0};return a.dropTrigger&&G.anchor.bind("click.DRPick",function(e){G.active||c(a.duration)}),a.alwaysOpen&&c(0),G.anchor.data("DRPick",{setStart:function(e,n){return e.constructor==String&&(e=t(e,a.format).toDate()),T(e,G.selRange.end?t(G.selRange.end).toDate():e,n),this},setEnd:function(e,n){return e.constructor==String&&(e=t(e,a.format).toDate()),T(G.selRange.start?t(G.selRange.start).toDate():e,e,n),this},setDateRange:function(e,n,r){e.constructor==String&&(e=t(e,a.format).toDate()),n.constructor==String&&(n=t(n,a.format).toDate()),T(e,n,r)},setDateText:function(e,t){var a=f(e);return a&&h(a,t),a},open:c,close:p,clear:m,redraw:Y,resetMonthsView:L,wrapper:function(){return G.wrapper},anchor:function(){return G.anchor},isActive:function(){return G.active},destroy:function(){G.anchor.unbind(".DRPick"),G.anchor.data("DRPick",void 0),G.wrapper.remove(),e(window).unbind("resize.DRPick scroll.DRPick",d),e(document).unbind("click.DRPick",l)}}),this}});