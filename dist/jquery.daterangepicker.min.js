/**
 * daterange-picker-ex
 * @version v1.1.2
 * @link https://adam5wu.github.io/DateRange-Picker-Ex/
 * @license MIT
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(e,t){"use strict";e.DRPExLang=e.extend({default:"en",en:{selected:"Selected:",day:"Day",days:"Days","apply-disabled":"Close","apply-enabled":"Apply","week-1":"mo","week-2":"tu","week-3":"we","week-4":"th","week-5":"fr","week-6":"sa","week-7":"su","week-number":"W",shortcuts:"Shortcuts",past:"Past",following:"Following",previous:"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year",next:"Next","next-week":"Week","next-month":"Month","next-year":"Year","batch-week":"week","batch-weekdays":"weekdays","batch-weekends":"weekends","batch-month":"month","less-than":"Date range should not be more than %d days","more-than":"Date range should not be less than %d days","range-start-bound":"Start date range out-of-bound","range-end-bound":"End date range out-of-bound","batch-invalid":"Date range does not satisfy batch constraint (%s)","disabled-range":"Date range spans across disabled dates","default-more":"Please select a date range longer than %d days","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between %d and %d days","default-default":"Please select a date range"}},e.DRPExLang),e.fn.dateRangePicker=function(a){function r(){function r(e){var t=e.parents("table").hasClass("month2"),r=V(t?X.month2:X.month1);!a.singleMonth&&!t&&L(r,X.month2)>=0||U(r)||(E(r,t?"month2":"month1"),B())}function n(){var e=V(X.month1),t=V(X.month2);U(t)||(E(e,"month1"),E(t,"month2"))}function i(e){var a=e.parents("table").hasClass("month2"),r=j(a?X.month2:X.month1);a&&L(r,X.month1)<=0||U(t(r).endOf("month").startOf("day").toDate())||(E(r,a?"month2":"month1"),B())}function l(){var e=j(X.month1),a=j(X.month2);U(t(e).endOf("month").startOf("day").toDate())||(E(a,"month2"),E(e,"month1"))}var p=s(X.locale),c=p[0];X.fblocalizer=p[1];var f=X.locale;if(a.language)a.language in e.DRPExLang&&(f=a.language);else{var h=navigator.languages||navigator.userLanguage||(navigator.language?[navigator.language]:[navigator.browserLanguage]);for(var g in h){var u=h[g].toLowerCase();if(u in e.DRPExLang){f=u;break}}}p=s(f),X.locale=p[0],X.localizer=p[1];var m=X.formatter.locale();X.formatter.locale(a.language)._locale||X.formatter.locale(X.locale)._locale||X.formatter.locale(c)._locale||X.formatter.locale(f)._locale||X.formatter.locale(m),X.monthFormat=X.formatter.localeData().longDateFormat("LL").replace(/Y(\s*)[^YMD]*D[^M]*/,"Y$1").replace(/M(\s*)[^YMD]*D[^Y]*/,"M$1").replace(/[^YM]*D[^YM]*/,""),void 0===a.startOfWeek&&(a.startOfWeek=7===X.formatter.startOf("week").isoWeekday()?0:1),X.wrapper=H(),(a.container||e("body")).append(X.wrapper),X.wrapper.delegate(".day","mouseleave",function(){X.wrapper.find(".date-range-length-tip").hide(),w()});var R="";R=o(a.singleDate?"default-single":a.minDays&&a.maxDays?"default-range":a.minDays?"default-more":a.maxDays?"default-less":"default-default");var O=R.replace(/\%d/,a.minDays).replace(/\%d/,a.maxDays);X.wrapper.find(".default-top").html(O).attr("title",O),a.singleMonth?X.wrapper.addClass("single-month"):X.wrapper.addClass("two-months"),X.wrapper.find(".next").click(function(){a.stickyMonths?n(e(this)):r(e(this))}),X.wrapper.find(".prev").click(function(){a.stickyMonths?l(e(this)):i(e(this))}),X.wrapper.delegate(".day","click",function(t){b(e(this))}),X.wrapper.delegate(".day","mouseenter",function(t){y(e(this))}),X.wrapper.delegate(".week-number","click",function(t){D(e(this))}),X.wrapper.delegate(".week-number","mouseenter",function(t){k(e(this))}),X.wrapper.attr("unselectable","on").css("user-select","none").bind("selectstart",function(e){return e.preventDefault(),!1}),X.wrapper.find(".apply-btn").click(function(){C()}),X.wrapper.find("[shortcut]").click(function(){var r,n,s,o=e(this).attr("shortcut"),i=t().startOf("day");if(o.indexOf("day")!=-1){var l=parseInt(o.split(",",2)[1]);0==l?(v(),Y()):(r=i.clone().add(l>0?1:-1,"day").toDate(),n=i.add(l,"day").toDate())}else if(o.indexOf("week")!=-1){var s=o.indexOf("prev,")==-1;r=s?i.day(a.startOfWeek?8:7).toDate():i.day(a.startOfWeek?-6:-7).toDate(),n=i.clone().day(a.startOfWeek?7:6).toDate()}else if(o.indexOf("month")!=-1){var s=o.indexOf("prev,")==-1;r=s?i.add(1,"month").date(1).toDate():i.subtract(1,"month").date(1).toDate(),n=i.clone().endOf("month").startOf("day").toDate()}else if(o.indexOf("year")!=-1){var s=o.indexOf("prev,")==-1;r=s?i.add(1,"year").month(0).date(1).toDate():i.subtract(1,"year").month(0).date(1).toDate(),n=i.clone().endOf("year").startOf("day").toDate()}else if("custom"==o){var d=e(this).text(),p=a.shortcuts.custom[d],c="function"==typeof p?p(i):p;if(c&&2==c.length&&(r=c[0],n=c[1]),c&&1==c.length){var f=c[0];E(f,"month1"),B()}}r&&n&&S(r,n)}),a.alwaysOpen||e(document).bind("click.DRPEx",d)}function n(e){if(!X.wrapper){if(void 0!==X.wrapper)throw new Error("Already destroyed");if(e)throw new Error("Not yet initialized")}}function s(t){for(var a=e.DRPExLang[t];a.constructor===String;)t=a,a=e.DRPExLang[a];return[t,a]}function o(e){return X.localizer[e]||X.fblocalizer[e]||"??"}function i(e){if(e.start&&e.end&&t(e.start).isAfter(t(e.end))){var a=e.end;return e.end=e.start,e.start=a,!0}return!1}function l(e,t){return t.contains(e.target)||e.target==t}function d(e){l(e,X.anchor[0])||l(e,X.wrapper[0])||X.active&&f(a.animationTime)}function p(){if(X.active){var t=X.anchor.offset(),a=X.anchor.outerWidth(),r=X.anchor.outerHeight();t.right=t.left+a,t.bottom=t.top+r;var n=X.wrapper.offset(),s=X.wrapper.outerWidth(),o=X.wrapper.outerHeight();n.right=n.left+s,n.bottom=n.top+o;var i={top:e(window).scrollTop(),left:e(window).scrollLeft()},l=e(window).width(),d=e(window).height();if(i.right=i.left+l,i.bottom=i.top+d,n.left>=i.left&&n.right<=i.right&&n.top>=i.top&&n.bottom<=i.bottom&&n.left==t.left&&(n.top==t.bottom||X.wrapper.bottom==t.top))return!1;var p,c=t.left+s<=i.right?Math.max(t.left,i.left):Math.max(i.left,i.right-s),f=t.bottom+o<=i.bottom||t.top-o<i.top;if(f){var h=Math.max(t.bottom,i.top);X.wrapper.css({top:h,bottom:"auto",left:c}),p=h-t.bottom}else{var g=e("body").outerHeight(),u=Math.min(t.top,i.bottom);X.wrapper.css({top:"auto",bottom:g-u,left:c}),p=t.top-u}return X.wrapper.css({opacity:.3+.7/Math.log2(2+(p>>7))}),!0}}function c(t){if(!X.active){X.wrapper||r(),X.active=!0,X.wrapper.css({display:"block",visibility:0}),u(),m(),a.container||p(),X.wrapper.css({display:"none",visibility:"initial"});var n=function(){X.anchor.trigger("DRPEx-opened",{relatedTarget:X.wrapper})};if(a.customOpenAnimation?a.customOpenAnimation.call(X.wrapper[0],n):X.wrapper.slideDown(t,n),X.anchor.trigger("DRPEx-open",{relatedTarget:X.wrapper}),a.container||e(window).bind("resize.DRPEx scroll.DRPEx",p),a.watchValueChange){var s=null;X.anchor.bind("input.DRPEx",function(){clearTimeout(s),s=setTimeout(function(){s=null;var e=h(a.getValue.call(X.anchor[0]));e&&g(e,!0)},200)})}return!0}return!1}function f(t){if(!a.alwaysOpen&&X.active){X.active=!1;var r=function(){X.anchor.trigger("DRPEx-closed",{relatedTarget:X.wrapper})};return a.customCloseAnimation?a.customCloseAnimation.call(X.wrapper[0],r):X.wrapper.slideUp(t,r),X.anchor.trigger("DRPEx-close",{relatedTarget:X.wrapper}),a.container||e(window).unbind("resize.DRPEx scroll.DRPEx",p),a.watchValueChange&&X.anchor.unbind("input.DRPEx"),!0}return!1}function h(e){var r=e&&e.constructor==String?e.trim():void 0;if(r){r=e.split(a.separator);for(var n=0;n<r.length;){var s=t(r[n],a.format,X.formatter.locale(),!0);if(!s.isValid())break;if(r[n]=s.toDate(),++n>=2)break;if(a.singleDate)break}n!=r.length&&(n>0?r.splice(n):r=void 0)}return r}function g(e,t){S(e[0],e.length>1?e[1]:e[0],t)}function u(){var e=h(a.getValue.call(X.anchor[0]));e&&g(e,!0),Y()}function m(){var e=X.wrapper.find(".gap").css("margin-left"),t=X.wrapper.find(".month1").width(),a=X.wrapper.find(".gap").width()+(e?2*parseInt(e):0),r=X.wrapper.find(".month2").width(),n=t+a+r+2;X.wrapper.find(".month-wrapper").width(n);var s=X.wrapper.find(".drp_top-bar input").outerWidth();X.wrapper.find(".drp_top-bar div").width(n-s-2)}function v(e){return!(!X.selRange.start&&!X.selRange.end)&&(X.selRange.start=!1,X.selRange.end=!1,X.wrapper.find(".day.checked").removeClass("checked"),X.wrapper.find(".day.range-end").removeClass("range-end"),X.wrapper.find(".day.range-start").removeClass("range-start"),x(),T(e),M(),!0)}function w(){X.wrapper.find(".day.hovering").removeClass("hovering"),X.wrapper.find(".date-range-length-tip").hide()}function y(t){if(!X.selWeek){var r=t.hasClass("has-tooltip")&&t.attr("data-tooltip")?q("span",{style:"white-space:nowrap"},t.attr("data-tooltip")):"";if(t.hasClass("valid")&&!t.hasClass("unselectable"))if(a.singleDate)X.wrapper.find(".day.hovering").removeClass("hovering"),t.addClass("hovering");else if(X.selRange.start&&!X.selRange.end){X.wrapper.find(".day").each(function(){var t=parseInt(e(this).attr("SOD-time"));t==hoverTime?e(this).addClass("hovering"):e(this).removeClass("hovering"),X.selRange.start<t&&hoverTime>=t||X.selRange.start>t&&hoverTime<=t?e(this).addClass("hovering"):e(this).removeClass("hovering")});var n=F(hoverTime,X.selRange.start);a.hoveringTooltip&&("function"==typeof a.hoveringTooltip?r=a.hoveringTooltip(n,X.selRange.start,hoverTime):a.hoveringTooltip===!0&&n>1&&(r=n+" "+o("days")))}if(r){var s=t.offset(),i=X.wrapper.offset(),l=s.left-i.left,d=s.top-i.top;l+=t.width()/2;var p=X.wrapper.find(".date-range-length-tip"),c=p.css({visibility:"hidden",display:"none"}).html(r).width(),f=p.height();l-=c/2,d-=f,p.css({left:l,top:d,display:"block",visibility:"visible"})}else X.wrapper.find(".date-range-length-tip").hide()}}function b(e){if(!X.selWeek&&e.hasClass("valid")&&!e.hasClass("unselectable")){var r=parseInt(e.attr("SOD-time"));if(e.addClass("checked"),a.singleDate)X.selRange.start=r,X.selRange.end=r;else if(i(X.selRange),"week"===a.batchMode?(X.selRange.start=t(r).day(a.startOfWeek?1:0).valueOf(),X.selRange.end=t(r).day(a.startOfWeek?7:6).valueOf()):"weekdays"===a.batchMode?(X.selRange.start=t(r).day(1).valueOf(),X.selRange.end=t(r).day(5).valueOf()):"weekends"===a.batchMode?(X.selRange.start=t(r).day(6).valueOf(),X.selRange.end=t(r).day(7).valueOf()):"month"===a.batchMode?(X.selRange.start=t(r).startOf("month").valueOf(),X.selRange.end=t(r).endOf("month").startOf("day").valueOf()):X.selRange.start&&X.selRange.end||!X.selRange.start&&!X.selRange.end?(X.selRange.start=r,X.selRange.end=!1):X.selRange.start&&(X.selRange.end=r),w(),!X.selRange.end){var n=A(X.selRange.start);X.anchor.trigger("DRPEx-first-date",{value:n,date1:new Date(X.selRange.start)}),y(e),X.wrapper.find(".week-number").removeClass("week-ranged")}x(),T(),P(),W()}}function R(t,a){X.wrapper.find(".day").each(function(){var r=parseInt(e(this).attr("SOD-time"));t==r?(e(this).addClass("range-start"),e(this).removeClass("range-end")):a==r?(e(this).removeClass("range-start"),e(this).addClass("range-end")):(e(this).removeClass("range-start"),e(this).removeClass("range-end")),t<=r&&a>=r?e(this).addClass("hovering"):e(this).removeClass("hovering")})}function D(e){if(!a.singleDate&&(!X.selRange.start||X.selRange.end||X.selWeek)&&e.hasClass("valid")&&!e.hasClass("unselectable")){var r=parseInt(e.attr("SOW-time"));if(X.selWeek){w();var n=new Date(r<X.selWeek?r:X.selWeek),s=new Date(r<X.selWeek?X.selWeek:r);X.selWeek=!1,X.selRange.start=t(n).day(a.startOfWeek?1:0).valueOf(),X.selRange.end=t(s).day(a.startOfWeek?7:6).valueOf(),x(),T(),P(),W()}else{X.selWeek=r;var o=new Date(r);X.selRange.start=t(o).day(a.startOfWeek?1:0).valueOf(),X.selRange.end=!1;var i=t(o).day(a.startOfWeek?7:6).valueOf();X.wrapper.find(".day.checked").removeClass("checked"),R(X.selRange.start,i),X.wrapper.find(".week-ranged").removeClass("week-ranged"),e.addClass("week-ranged"),x(),T(),M()}}}function k(e){if(X.selWeek&&!a.singleDate){var r=parseInt(e.attr("SOW-time"));if(r>=X.selWeek){var n=new Date(r),s=t(n).day(a.startOfWeek?7:6).valueOf();R(X.selRange.start,s)}else{var o=new Date(r),i=new Date(X.selWeek),l=t(o).day(a.startOfWeek?1:0).valueOf(),s=t(i).day(a.startOfWeek?7:6).valueOf();R(l,s)}}}function O(e){if(U(e))return!1;if(!a.singleDate){if(a.maxDays>0&&F(e,X.selRange.start)>a.maxDays||a.minDays>0&&F(e,X.selRange.start)<a.minDays)return!1;if(a.selectForward&&e<X.selRange.start||a.selectBackward&&e>X.selRange.start)return!1}if(a.beforeShowDay){for(var r=t(e);z(r,X.selRange.start);){var n=a.beforeShowDay(r.toDate());if(n[0]===!1)return!1;r.add(e<X.selRange.start?1:-1,"day")}return a.beforeShowDay(r.toDate())[0]!==!1}return!0}function x(){return X.wrapper.find(".unselectable").removeClass("unselectable"),X.selRange.start&&(X.selRange.end?(X.wrapper.find(".day.toMonth.valid").each(function(){var t=parseInt(e(this).attr("SOD-time"));t>=X.selRange.start&&t<=X.selRange.end&&(O(t)||e(this).addClass("unselectable"))}),X.wrapper.find(".week-number.valid").each(function(){var r=parseInt(e(this).attr("SOW-time"));r>=X.selRange.start&&(r=t(r).day(a.startOfWeek?7:6).toDate(),r<=X.selRange.end&&(O(r)||e(this).addClass("unselectable")))})):(X.wrapper.find(".day.toMonth.valid").each(function(){var t=parseInt(e(this).attr("SOD-time"));O(t)||e(this).addClass("unselectable")}),X.wrapper.find(".week-number.valid").each(function(){var r=parseInt(e(this).attr("SOW-time"));r>=X.selRange.start&&(r=t(r).day(a.startOfWeek?7:6).toDate()),O(r)||e(this).addClass("unselectable")}))),!0}function C(){if(M()){var e,t,r;a.singleDate?(e=A(X.selRange.start),X.anchor.trigger("DRPEx-apply",{value:e,date1:new Date(X.selRange.start)})):(t=A(X.selRange.start),r=A(X.selRange.end),e=t+a.separator+r,X.anchor.trigger("DRPEx-apply",{value:e,date1:[new Date(X.selRange.start),t],date2:[new Date(X.selRange.end),r]})),a.setValue.call(X.anchor[0],e,t,r)}f(a.animationTime)}function W(){M()&&a.autoClose&&C()}function M(){var e=!0,r=X.selRange.start&&X.selRange.end?F(X.selRange.start,X.selRange.end):NaN;if(a.singleDate)X.selRange.start||(e=void 0);else if(a.maxDays&&r>a.maxDays){var n=o("less-than").replace("%d",a.maxDays);X.wrapper.find(".drp_top-bar .error-top").html(n).attr("title",n),e=!1}else if(a.minDays&&r<a.minDays){var n=o("more-than").replace("%d",a.minDays);X.wrapper.find(".drp_top-bar .error-top").html(n).attr("title",n),e=!1}else isNaN(r)&&(e=void 0);if(e)if(U(X.selRange.start)){var n=o("range-start-bound");X.wrapper.find(".drp_top-bar .error-top").html(n).attr("title",n),e=!1}else if(U(X.selRange.end)){var n=o("range-end-bound");X.wrapper.find(".drp_top-bar .error-top").html(n).attr("title",n),e=!1}if(e&&a.batchMode){var s=t(X.selRange.start),i=t(X.selRange.end);switch(a.batchMode){case"week":s.isSame(s.clone().day(a.startOfWeek?1:0))&&i.isSame(s.clone().day(a.startOfWeek?7:6))||(e=!1);break;case"weekdays":s.isSame(s.clone().day(1))&&i.isSame(s.clone().day(5))||(e=!1);break;case"weekends":s.isSame(s.clone().day(6))&&i.isSame(s.clone().day(0))||(e=!1);break;case"month":s.isSame(s.clone().startOf("month"))&&i.isSame(s.clone().endOf("month").startOf("day"))||(e=!1);break;default:throw new Error("Unrecognized batch mode - "+a.batchMode)}if(!e){var n=o("batch-invalid").replace("%s",o("batch-"+a.batchMode));X.wrapper.find(".drp_top-bar .error-top").html(n).attr("title",n)}}if(e&&(e=O(X.selRange.end),!e)){var n=o("disabled-range");X.wrapper.find(".drp_top-bar .error-top").html(n).attr("title",n)}return e?(X.wrapper.find(".drp_top-bar").removeClass("error").addClass("normal"),X.wrapper.find(".apply-btn").removeClass("disabled").val(o("apply-enabled"))):(void 0==e?X.wrapper.find(".drp_top-bar").removeClass("error").addClass("normal"):X.wrapper.find(".drp_top-bar").addClass("error").removeClass("normal"),X.wrapper.find(".apply-btn").addClass("disabled").val(o("apply-disabled"))),e}function T(e){X.wrapper.find(".start-day").html("..."),X.wrapper.find(".end-day").html("..."),X.wrapper.find(".selected-days").hide(),X.selRange.start&&X.wrapper.find(".start-day").html(A(X.selRange.start)),X.selRange.end&&X.wrapper.find(".end-day").html(A(X.selRange.end)),X.selRange.start&&a.singleDate?e||X.anchor.trigger("DRPEx-change",{date1:new Date(X.selRange.start)}):X.selRange.start&&X.selRange.end?(X.wrapper.find(".selected-days").show().find(".selected-days-num").html(F(X.selRange.end,X.selRange.start)),e||X.anchor.trigger("DRPEx-change",{date1:new Date(X.selRange.start),date2:new Date(X.selRange.end)})):X.selRange.start||e||X.anchor.trigger("DRPEx-change",{});var t=X.wrapper.find(".drp_top-bar .normal-top");t.attr("title",t.text())}function S(e,t,r){var n={start:e,end:t};i(n),X.selRange.start==n.start.getTime()&&X.selRange.end==n.end.getTime()||(X.selRange.start=n.start.getTime(),X.selRange.end=n.end.getTime(),(a.stickyMonths||z(n.start,n.end)>0&&0===L(n.start,n.end))&&(a.lookBehind?n.start=j(n.end):n.end=V(n.start)),a.stickyMonths?a.dateRange.end!==!1&&L(n.end,a.dateRange.end)>0&&(n.start=j(n.start),n.end=j(n.end)):0===L(n.start,n.end)&&(a.lookBehind?n.start=j(n.end):n.end=V(n.start)),E(n.start,"month1"),E(n.end,"month2"),B(),T(r),r?M():W())}function P(){(X.selRange.start||X.selRange.end)&&(X.wrapper.find(".day").each(function(){var t=parseInt(e(this).attr("SOD-time"));X.selRange.end&&X.selRange.end>=t&&X.selRange.start<=t||!X.selRange.end&&X.selRange.start==t?e(this).addClass("checked"):e(this).removeClass("checked"),X.selRange.start==t?e(this).addClass("range-start"):e(this).removeClass("range-start"),X.selRange.end==t?e(this).addClass("range-end"):e(this).removeClass("range-end")}),X.wrapper.find(".week-number").each(function(){parseInt(e(this).attr("SOW-time"))==X.selWeek&&e(this).addClass("week-ranged")}),X.selRange.end&&X.wrapper.find(".week-number").each(function(){var r=new Date(parseInt(e(this).attr("SOW-time"))),n=t(r).day(a.startOfWeek?1:0).valueOf(),s=t(r).day(a.startOfWeek?7:6).valueOf();n>=X.selRange.start&&s<=X.selRange.end?e(this).addClass("week-ranged"):e(this).removeClass("week-ranged")}))}function E(e,a){e=t(e).startOf("month").toDate(),X.wrapper.find("."+a+" .month-name").html(_(e)),X.wrapper.find("."+a+" tbody").html($(e)),X[a]=e,x(),P()}function _(e){return X.formatter.toDate().setTime(e),X.formatter.format(X.monthFormat)}function A(e){return X.formatter.toDate().setTime(e),X.formatter.format(a.format)}function B(){L(X.month2,X.month1)>1?X.wrapper.addClass("has-gap").removeClass("no-gap").find(".gap").css("visibility","visible"):X.wrapper.removeClass("has-gap").addClass("no-gap").find(".gap").css("visibility","hidden");var e=X.wrapper.find("table.month1").height(),t=X.wrapper.find("table.month2").height();X.wrapper.find(".gap").height(Math.max(e,t)+10)}function I(){E(X.month1,"month1"),E(X.month2,"month2")}function N(){var e=a.defaultTime?a.defaultTime:new Date;return a.dateRange.start&&L(e,a.dateRange.start)<0?e=t(a.dateRange.start).toDate():a.dateRange.end&&L(e,a.dateRange.end)>0&&(e=j(t(a.dateRange.end).toDate())),e}function Y(){var e=X.selRange.start,t=X.selRange.end;e?0==L(e,t)&&(a.lookBehind?a.dateRange.start&&L(e,a.dateRange.start)>0&&(e=j(e)):t=V(t)):(e=N(),t=V(e)),E(e,"month1"),E(t,"month2"),B()}function L(e,a){return t(e).startOf("month").diff(t(a).startOf("month"),"month")}function z(e,a){return t(e).diff(t(a),"day")}function F(e,t){return Math.abs(z(e,t))+1}function V(e){return t(e).add(1,"month").toDate()}function j(e){return t(e).add(-1,"month").toDate()}function q(t,a,r){var n="<"+t;return a&&(e.each(a,function(e,t){n+=" "+e+'="'+t+'"'}),void 0!==r&&(n+=r?">"+r+"</"+t:"/")),n+">"}function H(){var t=q("div",{class:"date-picker-wrapper"+(a.haveTopbar?a.customTopBar?" custom-topbar":"":" no-topbar ")+(a.inline?" inline-wrapper":"")});a.haveTopbar&&(t+=q("div",{class:"drp_top-bar"}),a.customTopBar?t+=q("div",{class:"custom-top"},"function"==typeof a.customTopBar?a.customTopBar():a.customTopBar):(t+=q("div",{class:"normal-top"})+q("span",{},o("selected"))+" "+q("b",{class:"start-day"},"(Start day)"),a.singleDate||(t+=q("span",{class:"separator-day"},a.separator)+q("b",{class:"end-day"},"(End day)")+q("i",{class:"selected-days"})+" ("+q("span",{class:"selected-days-num"},"X")+" "+o("days")+")"+q("/i")),t+=q("/div"),t+=q("div",{class:"error-top"},"Error message")+q("div",{class:"default-top"},"Default message")),t+=q("input",{type:"button",value:o("apply-disabled"),class:"apply-btn disabled"+(a.autoClose?" hide":"")+(a.applyBtnClass?" "+a.applyBtnClass:"")},""),t+=q("/div")),t+=q("div",{class:"month-wrapper"});var r=function(){var e="";return a.showWeekNumbers&&(e+=q("th",{},o("week-number"))),e+=a.startOfWeek?q("th",{},o("week-1"))+q("th",{},o("week-2"))+q("th",{},o("week-3"))+q("th",{},o("week-4"))+q("th",{},o("week-5"))+q("th",{},o("week-6"))+q("th",{},o("week-7")):q("th",{},o("week-7"))+q("th",{},o("week-1"))+q("th",{},o("week-2"))+q("th",{},o("week-3"))+q("th",{},o("week-4"))+q("th",{},o("week-5"))+q("th",{},o("week-6"))},n=function(e){var t=q("table",{class:e,cellspacing:"0",border:"0",cellpadding:"0"});return t+=q("thead")+q("tr",{class:"caption"})+q("th",{class:"button"},q("span",{class:"prev"},a.customArrowPrevSymbol||"&lt;"))+q("th",{class:"month-name",colspan:a.showWeekNumbers?6:5},"(Month)")+q("th",{class:"button"},q("span",{class:"next"},a.customArrowNextSymbol||"&gt;"))+q("/tr")+q("tr",{class:"week-name"},r())+q("/thead"),t+q("tbody",{},"")+q("/table")};if(t+=n("month1"),!a.singleMonth){var s=function(){for(var e=q("div",{class:"gap"})+q("div",{class:"gap-top-mask"},"")+q("div",{class:"gap-bottom-mask"},"")+q("div",{class:"gap-lines"}),t=0;t<20;t++)e+=q("div",{class:"gap-line"},q("div",{class:"gap-1"},"")+q("div",{class:"gap-2"},"")+q("div",{class:"gap-3"},""));return e+q("/div")+q("/div")};t+=s()+n("month2")}t+=q("div",{class:"spacer"},"")+q("/div"),t+=q("div",{class:"footer"});var i=function(){var t="",r=a.shortcuts;if(r["prev-days"]&&r["prev-days"].length>0){t+=q("span",{class:"prev-days"})+o("past");for(var n=0;n<r["prev-days"].length;n++){var s=r["prev-days"][n];t+=q("span",{class:"shortcut",shortcut:"day,-"+s},s+" "+o(s>1?"days":"day"))}t+=q("/span")}if(r["next-days"]&&r["next-days"].length>0){t+=q("span",{class:"next-days"})+o("following");for(var n=0;n<r["next-days"].length;n++){var s=r["next-days"][n];t+=q("span",{class:"shortcut",shortcut:"day,+"+s},s+" "+o(s>1?"days":"day"))}t+=q("/span")}if(r.prev&&r.prev.length>0){t+=q("span",{class:"prev-buttons"})+o("previous");for(var n=0;n<r.prev.length;n++){var i=r.prev[n];t+=q("span",{class:"shortcut",shortcut:"prev,"+i},o("prev-"+i))}t+=q("/span")}if(r.next&&r.next.length>0){t+=q("span",{class:"next-buttons"})+o("next");for(var n=0;n<r.next.length;n++){var i=r.next[n];t+=q("span",{class:"shortcut",shortcut:"next,"+i},o("next-"+i))}t+=q("/span")}if(r.custom&&!e.isEmptyObject(r.custom)){t+=q("span",{class:"custom-buttons"});for(var l in r.custom)t+=q("span",{class:"shortcut",shortcut:"custom"},l);t+=q("/span")}return t},l=i();return t+=q("div",{class:"shortcuts"+(l?"":" none")},q("b",{},o("shortcuts"))+l),t+=q("/div"),t+=q("div",{class:"date-range-length-tip"},""),t+=q("/div"),e(t)}function U(e){return e=t(e),a.dateRange.start&&e.isBefore(a.dateRange.start)||a.dateRange.end&&e.isAfter(a.dateRange.end)}function $(e){var r=[];e.setDate(1);var n=e.getDay();if(0===n&&a.startOfWeek&&(n=7),n>0)for(var s=n;s>0;s--){var o=t(e).subtract(s,"day").toDate();r.push({date:o,type:"lastMonth",day:o.getDate(),time:o.getTime(),valid:!U(o.getTime())})}for(var i=e.getMonth(),s=0;s<40;s++){var l=t(e).add(s,"day").toDate();r.push({date:l,type:l.getMonth()==i?"toMonth":"nextMonth",day:l.getDate(),time:l.getTime(),valid:!U(l.getTime())})}var d="",p=t(),c=p.diff(e,"month",!0);(c<0||c>1)&&(p=!1);for(var f=0;f<6&&"nextMonth"!=r[7*f].type;f++){d+=q("tr");for(var h,g="",u=!0,o=0;o<7;o++){var m=7*f+(a.startOfWeek?o+1:o),l=r[m];if(0===o&&(h=l),l.extraClass="",l.tooltip="",l.valid&&a.beforeShowDay){var v=a.beforeShowDay(l.date);l.valid=v[0],l.extraClass=v[1]||"",l.tooltip=v[2]||"",""!==l.tooltip&&(l.extraClass+=" has-tooltip ")}u=u&&l.valid,a.startOfWeek?o>=5&&(l.extraClass+=" weekend "):0!=o&&6!=o||(l.extraClass+=" weekend "),g+=q("td",{},q("div",{"SOD-time":l.time,"data-tooltip":l.tooltip,class:"day "+l.type+" "+l.extraClass+" "+(l.valid?"valid":l.valid===!1?"invalid":"skipped")+(p&&p.date()==l.day?" real-today":"")},Q(l.time,l.day)))}a.showWeekNumbers&&(d+=q("td",{},q("div",{class:"week-number "+(u?"valid":"invalid"),"SOW-time":h.time},a.getWeekNumber(h.date)))),d+=g+q("/tr")}return d}function Q(e,t){return a.showDateFilter&&"function"==typeof a.showDateFilter?a.showDateFilter(e,t):t}a=e.extend({autoClose:!1,format:"YYYY-MM-DD",separator:" to ",language:void 0,startOfWeek:void 0,getValue:function(){return e(this).val()},setValue:function(t){t!=e(this).val()&&e(this).val(t).change()},dateRange:{start:!1,end:!1},minDays:0,maxDays:0,shortcuts:{},watchValueChange:!0,container:void 0,alwaysOpen:!1,dropTrigger:!0,singleDate:!1,lookBehind:!1,batchMode:!1,animationTime:200,stickyMonths:!1,selectForward:!1,selectBackward:!1,applyBtnClass:"",singleMonth:!1,hoveringTooltip:function(e,t,a){return e>1?e+" "+o("days"):""},haveTopbar:!0,showWeekNumbers:!1,getWeekNumber:function(e){return t(e).format("w")},customOpenAnimation:null,customCloseAnimation:null,customArrowPrevSymbol:null,customArrowNextSymbol:null},a),a.singleMonth&&(a.stickyMonths=!1),a.haveTopbar||(a.autoClose=!0),a.singleDate&&(a.batchMode=!1),a.dateRange.start&&a.dateRange.start.constructor==String&&(a.dateRange.start=t(a.dateRange.start,a.format).toDate()),a.dateRange.end&&a.dateRange.end.constructor==String&&(a.dateRange.end=t(a.dateRange.end,a.format).toDate()),i(a.dateRange);var X={selRange:{start:!1,end:!1},selWeek:!1,active:!1,locale:"default",localizer:{},fblocalizer:{},formatter:t(),monthFormat:"??",anchor:e(this),wrapper:void 0};return a.dropTrigger&&X.anchor.bind("click.DRPEx",function(e){X.active||c(a.animationTime)}),a.alwaysOpen&&c(0),X.anchor.data("DRPEx",{open:function(e){return n(),c(e)},close:function(e){return n(),f(e)},setStart:function(e,r){return n(!0),e.constructor==String&&(e=t(e,a.format).toDate()),S(e,X.selRange.end?t(X.selRange.end).toDate():e,r),this},setEnd:function(e,r){return n(!0),e.constructor==String&&(e=t(e,a.format).toDate()),S(X.selRange.start?t(X.selRange.start).toDate():e,e,r),this},setDateRange:function(e,r,s){n(!0),e.constructor==String&&(e=t(e,a.format).toDate()),r.constructor==String&&(r=t(r,a.format).toDate()),S(e,r,s)},setDateText:function(e,t){n(!0);var a=h(e);return a&&g(a,t),a},clear:function(e){return n(),v(e)},wrapper:function(){return n(!0),X.wrapper},anchor:function(){return n(),X.anchor},redraw:function(){n(),X.wrapper&&I()},resetMonthsView:function(){n(),X.wrapper&&Y()},isActive:function(){return n(),X.active},destroy:function(){n(),X.anchor.unbind(".DRPEx"),X.anchor.data("DRPEx",void 0),X.wrapper&&X.wrapper.remove(),X.wrapper=null,e(window).unbind("resize.DRPEx scroll.DRPEx",p),e(document).unbind("click.DRPEx",d)}}),this}});